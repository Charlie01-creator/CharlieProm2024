<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Central College Mityana — Gallery</title>
  <style>
    :root {
      --brand: #e91e63;
      --brand2: #ff4081;
    }

  </style>
</head>
<body>
  <header>
    <div class="nav">
      <a class="logo" href="#home" aria-label="Home">
        Central College Mityana • Prom 2024
      </a>
      <nav class="links">
        <a href="index.html" class="active">Home</a>
        <a href="#about">About</a>
        <a href="#highlights">Highlights</a>
        <a href="gallery.html">Gallery</a>
        <a href="#share">Share</a>
        <a href="support.html">Support</a>
        <a href="contact.html">Contact</a>
        <button class="cta-sign" onclick="openSign()">Sign In</button>
      </nav>
      <button class="burger" id="burger" aria-label="Open menu" onclick="toggleDrawer()">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>

  <!-- Mobile drawer -->

  <aside class="drawer" id="drawer" role="dialog" aria-modal="true">
    <a href="index.html" onclick="closeDrawer()">Home</a>
    <a href="#about" onclick="closeDrawer()">About</a>
    <a href="#highlights" onclick="closeDrawer()">Highlights</a>
    <a href="gallery.html" onclick="closeDrawer()">Gallery</a>
    <a href="#share" onclick="closeDrawer()">Share</a>
    <a href="support.html" onclick="closeDrawer()">Support</a>
    <a href="contact.html" onclick="closeDrawer()">Contact</a>
    <button class="cta-sign" style="margin-top:16px" onclick="closeDrawer(); openSign()">Sign In</button>
  </aside>
  <div class="scrim" id="scrim" onclick="closeDrawer()"></div>

  <!-- Gallery -->

  <div class="gallery" id="gallery-container"></div>
  <div id="loading" class="loading">Loading images...</div>

  <!-- Lightbox -->

  <div id="lightbox" onclick="closeLightbox()">
    <div>
      <img src="" alt="Lightbox Image">
      <div id="lightbox-caption"></div>
    </div>
  </div>

  <!-- Scroll to top -->

<button id="scrollTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</button>

  <!-- Footer -->

  <footer>
    <div style="font-weight:700; color:#e91e63">Central College Mityana Prom Memories</div>
    <div style="margin-top:10px;">
      <a href="index.html">Home</a>•
      <a href="gallery.html">Gallery</a>•
      <a href="about.html">About</a>•
      <a href="#">Terms</a>•
      <a href="#">Privacy</a>
    </div>
    <div style="margin-top:8px">© 2024 Central College Mityana Prom. All rights reserved.</div>
  </footer>

  <!-- Sign-in Modal -->

  <dialog id="signinModal" style="border:none; border-radius:16px; padding:0; max-width:420px; width:92vw;">
    <div style="padding:22px 22px 18px">
      <h3 style="margin:0 0 8px">Sign in to Share Images</h3>
      <p style="margin:0 0 12px">Enter your email to continue.</p>
      <input type="email" id="emailModal" placeholder="you@example.com" style="width:100%; padding:8px; margin-bottom:12px;">
      <div style="display:flex; gap:8px;">
        <button class="cta-sign" onclick="applyModalSign()">Continue</button>
        <button class="cta-sign" style="background:#aaa;" onclick="closeSign()">Cancel</button>
      </div>
    </div>
  </dialog>

  <script>
    // Header drawer
    const drawer = document.getElementById('drawer');
    const scrim = document.getElementById('scrim');
    function toggleDrawer() {
      drawer.style.display = 'block';
      scrim.style.display = 'block';
      document.body.classList.add('noscr');
    }
    function closeDrawer() {
      drawer.style.display = 'none';
      scrim.style.display = 'none';
      document.body.classList.remove('noscr');
    }

    // Sign modal
    const modal = document.getElementById('signinModal');
    function openSign() { modal.showModal(); }
    function closeSign() { modal.close(); }
    function applyModalSign() { alert('Email submitted: '+document.getElementById('emailModal').value); closeSign(); }

    // Scroll to top button
    window.addEventListener('scroll', () => {
      const scrollBtn = document.getElementById('scrollTop');
      scrollBtn.style.display = window.scrollY > 300 ? 'block' : 'none';
    });

    // Gallery
    const TOTAL_IMAGES = 18;
    const IMAGES_PER_LOAD =9;
    const COLUMN_COUNT = 3;
    const gallery = document.getElementById('gallery-container');
    const loadingElement = document.getElementById('loading');
    let loadedCount = 0;
    const columns = [];

    function createGalleryColumns() {
      for (let i = 0; i < COLUMN_COUNT; i++) {
        const column = document.createElement('div');
        column.className = 'gallery-column';
        gallery.appendChild(column);
        columns.push(column);
      }
    }

    function createImageElement(imageNumber) {
      const img = document.createElement('img');
      // Fixed: Images are in the same folder, not a subfolder
      img.src = imageNumber + '.jpg';
      img.alt = 'Prom Image ' + imageNumber;
      img.loading = 'lazy';

      const item = document.createElement('div');
      item.className = 'gallery-item';
      item.appendChild(img);
      item.addEventListener('click', () => openLightbox(img));

      // Distribute images evenly across columns
      columns[(imageNumber - 1) % COLUMN_COUNT].appendChild(item);
    }

    function loadImages(count) {
      const endIndex = Math.min(loadedCount + count, TOTAL_IMAGES);
      for (let i = loadedCount + 1; i <= endIndex; i++) {
        createImageElement(i);
      }
      loadedCount = endIndex;
      if (loadedCount >= TOTAL_IMAGES) loadingElement.style.display = 'none';
    }

    function setupScrollListener() {
      window.addEventListener('scroll', function() {
        if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 500) {
          if (loadedCount < TOTAL_IMAGES) loadImages(IMAGES_PER_LOAD);
        }
      });
    }

    // Lightbox
    const lb = document.getElementById('lightbox');
    const lbImg = lb.querySelector('img');
    const lbCaption = document.getElementById('lightbox-caption');
    function openLightbox(img) {
      lbImg.src = img.src;
      lbCaption.textContent = img.alt;
      lb.classList.add('active');
      document.body.classList.add('noscr');
    }
    function closeLightbox() {
      lb.classList.remove('active');
      document.body.classList.remove('noscr');
      lbImg.src = '';
      lbCaption.textContent = '';
    }
    // Function to remove multiple images by numbers (pass as an array)
    function removeImages(imageNumbers) {
        const images = document.querySelectorAll('.gallery-item img');

        images.forEach(img => {
            const num = parseInt(img.alt.replace("Image ", ""));
            if (imageNumbers.includes(num)) {
                img.parentElement.remove();
                loadedCount--; // update the loaded image counter
            }
        });
    }

    // Example usage: remove images 6, 9, 59, and 600
    removeImages([17, 18,,]);

    // Initialize gallery
    document.addEventListener('DOMContentLoaded', function() {
      createGalleryColumns();
      loadImages(IMAGES_PER_LOAD);
      setupScrollListener();
    });
  </script>

</body>
</html>
