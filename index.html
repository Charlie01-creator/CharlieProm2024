<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Central College Mityana — Prom 2024</title>

  <!-- Performance -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <meta name="description" content="Relive the magic of Central College Mityana Prom 2024 — highlights, gallery, and shared memories with watermark protection." />
  <meta name="theme-color" content="#e91e63" />

  <style>
    :root{
      --brand:#e91e63; --brand2:#ff4081; --ink:#222; --muted:#666; --bg:#fafafa; --panel:#fff;
      --radius:16px; --shadow: 0 10px 24px rgba(0,0,0,.08);
      --header-h:74px;
    }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; scroll-behavior:smooth; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--ink)}
    img{max-width:100%; display:block}
    a{text-decoration:none; color:inherit}

    /* Header / Navbar */
    header{
      position:sticky; top:0; z-index:1000;
      background:rgba(255,255,255,.95); backdrop-filter:saturate(140%) blur(8px);
      border-bottom:1px solid #eee;
    }
    .nav{
      max-width:1200px; margin:0 auto; height:var(--header-h);
      display:flex; align-items:center; justify-content:space-between; padding:0 20px;
    }
    .logo{
      display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.3px;
      color:var(--brand); font-size:1.15rem;
    }
    .logo svg{width:30px; height:30px}
    .links{display:flex; align-items:center; gap:22px}
    .links a{
      padding:10px 6px; position:relative; font-weight:500; color:#333;
    }
    .links a.active::after, .links a:hover::after{
      content:""; position:absolute; left:0; bottom:4px; height:2px; width:100%;
      background:linear-gradient(90deg,var(--brand),var(--brand2));
      border-radius:2px;
    }
    .cta-sign{
      margin-left:6px;
      border:0; padding:10px 16px; border-radius:999px; cursor:pointer;
      background:linear-gradient(45deg,var(--brand),var(--brand2));
      color:#fff; font-weight:700; box-shadow:0 6px 14px rgba(233,30,99,.2);
    }

    /* Mobile */
    .burger{display:none; flex-direction:column; gap:5px; cursor:pointer}
    .burger span{width:26px; height:3px; background:#333; border-radius:3px; transition:.25s}
    .drawer{
      display:none; position:fixed; inset:0 0 0 auto; width:min(78vw,320px); height:100vh; background:#fff;
      padding:90px 24px 24px; box-shadow:-12px 0 30px rgba(0,0,0,.12); z-index:1001;
    }
    .drawer a{display:block; padding:14px 0; border-bottom:1px solid #eee}
    .scrim{display:none; position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:1000}
    .noscr{overflow:hidden}

    @media (max-width: 900px){
      .links{display:none}
      .burger{display:flex}
    }

    /* Sections */
    section{padding: clamp(60px,6vw,100px) 20px}
    .wrap{max-width:1200px; margin:0 auto}

    /* Hero */
    .hero{
      margin-top:0; padding-top:calc(20px);
      background:
        linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.6)),
        url('1@ (222) copy-1.jpg') center/cover no-repeat;
      color:#fff; text-align:center; position:relative;
    }
    .hero .wrap{padding-top:40px; padding-bottom:80px}
    .eyebrow{font-weight:700; letter-spacing:.2em; font-size:.8rem; opacity:.9}
    .title{font-size: clamp(2rem, 4.8vw, 3.2rem); line-height:1.15; margin:.6rem 0 1rem}
    .subtitle{max-width:820px; margin:0 auto 24px; font-size: clamp(1rem, 2.4vw, 1.2rem); opacity:.95}
    .btns{display:flex; justify-content:center; gap:14px; flex-wrap:wrap}
    .btn{
      border:0; padding:14px 24px; border-radius:999px; font-weight:700; cursor:pointer;
      background:#fff; color:#111; box-shadow:var(--shadow);
    }
    .btn.primary{background:linear-gradient(45deg,var(--brand),var(--brand2)); color:#fff}
    .btn.ghost{background:transparent; border:2px solid #fff; color:#fff; box-shadow:none}

    /* About */
    .about{
      background:var(--panel); border-radius:var(--radius); box-shadow:var(--shadow);
    }
    .grid-2{
      display:grid; grid-template-columns:1.1fr .9fr; gap:30px; align-items:center;
    }
    .kicker{color:var(--brand); font-weight:800; margin-bottom:10px}
    h2.sec{font-size: clamp(1.6rem, 3.4vw, 2.2rem); margin:.2rem 0 .8rem}
    .muted{color:var(--muted)}
    @media (max-width: 900px){ .grid-2{grid-template-columns:1fr} }

    /* Highlights */
    .highlights .cards{
      display:grid; grid-template-columns: repeat(4, 1fr); gap:18px;
    }
    .card{
      background:#fff; border:1px solid #eee; border-radius:18px; padding:18px; box-shadow:var(--shadow);
      transition: transform .25s ease, box-shadow .25s ease;
    }
    .card:hover{transform:translateY(-6px); box-shadow:0 16px 30px rgba(0,0,0,.12)}
    .card .icon{font-size:28px}
    .card h3{margin:10px 0 6px; font-size:1.05rem}
    .pill{display:inline-block; padding:6px 10px; border-radius:999px; background:#f7f7f7; font-size:.85rem}
    @media (max-width: 900px){ .highlights .cards{grid-template-columns:1fr 1fr} }
    @media (max-width: 560px){ .highlights .cards{grid-template-columns:1fr} }

    /* Gallery */
<style>
  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 12px;
    justify-items: center;
  }

  .gallery-grid img {
    width: 100%;
    max-width: 160px;
    max-height: 160px;
    object-fit: cover;
    border-radius: 8px;
    transition: transform 0.3s ease;
  }

  .gallery-grid img:hover {
    transform: scale(1.05);
  }
.gallery .grid{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:14px;
    }
    .shot{
      position:relative; overflow:hidden; border-radius:16px; border:1px solid #eee; background:#fff
    }
    .shot img{width:100%; object-fit:cover; transition:transform .35s ease}
    .shot:hover img{transform:scale(1.04)}
    .wm{
      position:absolute; right:10px; bottom:10px; font-size:.8rem; color:#fff;
      background:rgba(0,0,0,.4); padding:3px 8px; border-radius:6px
    }

    /* Lightbox */
    .lightbox{display:none; position:fixed; inset:0; background:rgba(0,0,0,.9); z-index:1200; align-items:center; justify-content:center}
    .lightbox.active{display:flex}
    .lightbox img{max-width:92vw; max-height:82vh; border-radius:12px}
    .lightbox .close{position:absolute; top:20px; right:20px; background:#fff; border:0; padding:10px 14px; border-radius:999px; font-weight:800; cursor:pointer}

    /* Share / Upload */
    .share .panel{
      display:grid; grid-template-columns:1.1fr .9fr; gap:24px; align-items:center;
      background:#fff; border-radius:18px; box-shadow:var(--shadow); padding:22px;
    }
    @media (max-width: 900px){ .share .panel{grid-template-columns:1fr} }
    .well{background:#f9f9ff; border:1px dashed #d7d7ff; border-radius:14px; padding:14px}
    .form-row{display:flex; gap:10px; flex-wrap:wrap}
    input[type="email"], input[type="text"], input[type="file"]{
      width:100%; padding:12px 14px; border:1px solid #ddd; border-radius:10px; outline:none; font:inherit;
    }
    .inline{display:flex; gap:10px; flex-wrap:wrap}
    .small{font-size:.9rem; color:var(--muted)}

    /* Testimonials */
    .tape{display:flex; gap:16px; overflow:auto; scroll-snap-type:x mandatory; padding-bottom:6px}
    .quote{
      min-width: 300px; max-width:300px; scroll-snap-align:start;
      background:#fff; padding:18px; border-radius:16px; border:1px solid #eee; box-shadow:var(--shadow)
    }
    .quote .who{display:flex; align-items:center; gap:10px; margin-top:10px; font-weight:600}
    .avatar{width:36px; height:36px; border-radius:50%; object-fit:cover}

    /* Contact */
    .contact{
      background:linear-gradient(135deg, var(--brand2), var(--brand)); color:#fff; text-align:center; border-radius:18px;
    }
    .socials{display:flex; gap:12px; justify-content:center; margin-top:12px}
    .socials a{display:inline-flex; align-items:center; justify-content:center; width:40px; height:40px; border-radius:50%; background:rgba(255,255,255,.12)}
    .socials a:hover{background:#fff; color:#000}

    /* Footer */
    footer{padding:28px 20px; text-align:center; color:#888}

    /* Reveal on scroll */
    .reveal{opacity:0; transform:translateY(32px); transition:all .7s ease}
    .reveal.show{opacity:1; transform:none}
  </style>
</head>
<body>
  <!-- HEADER, HERO, ABOUT, HIGHLIGHTS, GALLERY, LIGHTBOX, SHARE, TESTIMONIALS, CONTACT, FOOTER, SIGN-IN MODAL -->
  <!-- ALL CONTENT EXACTLY AS PROVIDED IN YOUR ORIGINAL PAGE -->

  <!-- Header -->
  <header>
    <div class="nav">
      <a class="logo" href="#home" aria-label="Home">
        <!-- Clean SVG cap logo -->
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M12 2L2 7l10 5 8-4.1V14h2V7L12 2Z" fill="url(#g)"/>
          <path d="M6 10v4c0 2.2 4 4 6 4s6-1.8 6-4v-4" stroke="#e91e63" stroke-width="1.4" fill="none" />
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="24" y2="24">
              <stop stop-color="#e91e63"/><stop offset="1" stop-color="#ff4081"/>
            </linearGradient>
          </defs>
        </svg>
        Central College Mityana • Prom 2024
      </a>

      <nav class="links" aria-label="Primary">
        <a href="#home" class="active">Home</a>
        <a href="#about">About</a>
        <a href="#highlights">Highlights</a>
        <a href="#gallery">Gallery</a>
        <a href="#share">Share</a>
        <a href="#testimonials">Testimonials</a>
        <a href="#contact">Contact</a>
        <button class="cta-sign" onclick="openSign()">Sign In</button>
      </nav>

      <div class="burger" id="burger" aria-label="Open menu" aria-expanded="false" onclick="toggleDrawer()">
        <span></span><span></span><span></span>
      </div>
    </div>
  </header>
  <!-- Mobile drawer -->
  <aside class="drawer" id="drawer" role="dialog" aria-modal="true" aria-label="Menu">
    <a href="#home" onclick="closeDrawer()">Home</a>
    <a href="about.html" onclick="closeDrawer()">About</a>
    <a href="#highlights" onclick="closeDrawer()">Highlights</a>
    <a href="gallery.html" onclick="closeDrawer()">Gallery</a>
    <a href="#share" onclick="closeDrawer()">Share</a>
    <a href="#testimonials" onclick="closeDrawer()">Testimonials</a>
    <a href="#contact" onclick="closeDrawer()">Contact</a>
    <button class="cta-sign" style="margin-top:16px" onclick="closeDrawer(); openSign()">Sign In</button>
  </aside>
  <div class="scrim" id="scrim" onclick="closeDrawer()"></div>

  <!-- Hero -->
  <section id="home" class="hero">
    <div class="wrap">
      <div class="eyebrow">CENTRAL COLLEGE MITYANA</div>
      <h1 class="title">Relive the Magic of <span style="background:linear-gradient(45deg,#fff,#ffecf3); -webkit-background-clip:text; background-clip:text; color:transparent;">Prom Night 2024</span></h1>
      <p class="subtitle">Red carpet arrivals, sparkling decor, epic dance floor moments, and memories we’ll keep forever.</p>
      <div class="btns">
        <a class="btn primary" href="#gallery">View Gallery</a>
        <button class="btn ghost" onclick="openSign()">Share Memories</button>
      </div>
    </div>
  </section>
  

  <!-- About -->
  <section id="about">
    <div class="wrap about reveal">
      <div class="grid-2">
        <div>
          <div class="kicker">About Prom Day</div>
          <h2 class="sec">Elegance, Friendship, and Unforgettable Moments</h2>
          <p class="muted">From the first flash on the red carpet to the last song from the DJ, Prom 2024 brought the class together in style. This page captures the story — your outfits, your smiles, and the energy that made the night special.</p>
          <p class="small" style="margin-top:10px">Tip: Tap any image to view it large. Uploads are watermarked to protect your memories.</p>
        </div>
        <img src="sd.jpg" loading="lazy" alt="Red carpet arrivals">
      </div>
    </div>
  </section>

  <!-- Highlights -->
  <section id="highlights">
    <div class="wrap highlights reveal">
      <h2 class="sec">Night Highlights</h2>
      <div class="cards" style="margin-top:14px">
        <article class="card">
          <div class="pill">🎤 DJ Set</div>
          <h3>Dance Floor Vibes</h3>
          <p class="muted">The DJ spun non-stop bangers — from Afrobeats to Pop — keeping sneakers and heels moving.</p>
        </article>
        <article class="card">
          <div class="pill">🎬 Red Carpet</div>
          <h3>Drip & Glam</h3>
          <p class="muted">Stylish suits and stunning gowns lit up the step-and-repeat.</p>
        </article>
        <article class="card">
          <div class="pill">📸 Photo Booth</div>
          <h3>Instant Keepsakes</h3>
          <p class="muted">Grabbed props, struck poses, and took home prints with friends.</p>
        </article>
        <article class="card">
          <div class="pill">👑 Royalty</div>
          <h3>King & Queen</h3>
          <p class="muted">The crowning moment the whole room cheered for.</p>
        </article>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <section id="gallery">
    <div class="wrap reveal">
      <h2 class="sec">Gallery</h2>
      <div class="grid" style="margin-top:14px">
        <!-- Sample shots (replace with your images). All lazy + watermark badge -->
        <a href="#" class="shot" data-big="asf.jpg" onclick="openLightbox(event)">
          <img loading="lazy" src="awsf.jpg" alt="Dance floor">
          <span class="wm">© charlie02056@gmail.com</span>
        </a>
        <a href="#" class="shot" data-big="400.jpg" onclick="openLightbox(event)">
          <img loading="lazy" src="19.jpg" alt="Group photo">
          <span class="wm">© 0700955563</span>
        </a>
        <a href="#" class="shot" data-big="sd.jpg" onclick="openLightbox(event)">
          <img loading="lazy" src="540.jpg" alt="Laughing candid">
          <span class="wm">© Central College</span>
        </a>
        <a href="#" class="shot" data-big="24.jpg" onclick="openLightbox(event)">
          <img loading="lazy" src="200.jpg" alt="Award moment">
          <span class="wm">© Prom 2024</span>
        </a>
      </div>
      <p class="small" style="margin-top:10px">More photos coming soon. For faster loads, thumbnails are optimized and full images open in a lightbox.</p>
    </div>
  </section>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-modal="true" role="dialog">
    <button class="close" onclick="closeLightbox()">✕ Close</button>
    <img alt="Preview">
  </div>

  <!-- Share / Sign-in & Upload -->
  <section id="share">
    <div class="wrap share reveal">
      <h2 class="sec">Share Your Moments</h2>
      <div class="panel">
        <div>
          <p class="muted">Sign in with your email to save or share images.</p>
          <div class="well" style="margin-top:10px">
            <div class="form-row">
              <input type="email" id="email" placeholder="Your email (e.g. charlie02056@gmail.com)" autocomplete="email">
              <button class="cta-sign" onclick="fakeSignIn()">Sign In</button>
            </div>
            <p id="signin-status" class="small" style="margin:8px 0 0"></p>
          </div>

          <div id="uploadArea" style="display:none; margin-top:14px">
            <div class="form-row">
              <input type="text" id="wmText" placeholder="Watermark text (default: your email)">
            </div>
            <div class="inline">
              <input type="file" id="fileInput" accept="image/*">
              <button class="btn primary" onclick="applyWatermark()">Apply Watermark</button>
            </div>
            <p class="small">After processing, right-click or long-press the preview to save, or use the Download button.</p>
            <div id="previewWrap" style="margin-top:10px; display:none">
              <canvas id="canvas" style="max-width:100%; border:1px solid #eee; border-radius:10px"></canvas>
              <div class="inline" style="margin-top:10px">
                <button class="btn" onclick="downloadCanvas()">Download Watermarked Image</button>
              </div>
            </div>
          </div>
        </div>
        <img src="457.jpg" loading="lazy" alt="Sharing memories">
      </div>
    </div>
  </section>

  <!-- Testimonials -->
  <section id="testimonials">
    <div class="wrap reveal">
      <h2 class="sec">What Students Said</h2>
      <div class="tape" id="tape">
        <article class="quote">
          <p>“The music, the outfits — everything was perfect. Best night of the year!”</p>
          <div class="who"><img class="avatar" loading="lazy" src="68.jpg" alt="Student A"> Aisha • S.6</div>
        </article>
        <article class="quote">
          <p>“Photo booth with my crew was hilarious — memories secured!”</p>
          <div class="who"><img class="avatar" loading="lazy" src="54.jpg" alt="Student B"> Brian • S.4</div>
        </article>
        <article class="quote">
          <p>“The red carpet felt like a movie premiere. 10/10.”</p>
          <div class="who"><img class="avatar" loading="lazy" src="465.jpg" alt="Student C"> Mercy • S.6</div>
        </article>
      </div>
      <p class="small" style="text-align:center; margin-top:8px">Swipe sideways on mobile to see more.</p>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact">
    <div class="wrap contact reveal">
      <h2 class="sec" style="color:#fff">Get in Touch</h2>
      <p>For photo inquiries or to request removals/credits:</p>
      <p><strong>Email:</strong> photos@promgallery.com • <strong>WhatsApp:</strong> <a href="https://wa.me/256700955563" style="color:#fff; text-decoration:underline">+256 700 955563</a></p>
      <div class="socials">
        <a href="#" aria-label="Facebook">📘</a>
        <a href="#" aria-label="Instagram">📷</a>
        <a href="#" aria-label="X / Twitter">🐦</a>
        <a href="#" aria-label="YouTube">▶️</a>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap">
      <div style="font-weight:700; color:#e91e63">Central College Mityana Prom Memories</div>
      <div style="margin-top:10px; display:flex; gap:16px; justify-content:center; flex-wrap:wrap">
        <a href="#home">Home</a>•<a href="#gallery">Gallery</a>•<a href="#about">About</a>•<a href="#">Terms</a>•<a href="#">Privacy</a>
      </div>
      <div style="margin-top:8px">© 2024 Central College Mityana Prom. All rights reserved.</div>
    </div>
  </footer>

  <!-- Sign-in Modal (lightweight) -->
  <dialog id="signinModal" style="border:none; border-radius:16px; padding:0; max-width:420px; width:92vw;">
    <div style="padding:22px 22px 18px">
      <h3 style="margin:0 0 8px">Sign in to Share Images</h3>
      <p class="small" style="margin:0 0 12px">Enter your email to continue.</p>
      <div class="form-row">
        <input type="email" id="emailModal" placeholder="you@example.com">
      </div>
      <div class="inline" style="margin-top:12px">
        <button class="cta-sign" onclick="applyModalSign()">Continue</button>
        <button class="btn" onclick="closeSign()">Cancel</button>
      </div>
    </div>
  </dialog>

  <script>
    /* ======= Mobile drawer ======= */
    const drawer = document.getElementById('drawer');
    const scrim = document.getElementById('scrim');
    const burger = document.getElementById('burger');
    function toggleDrawer(){
      const open = drawer.style.display === 'block';
      if(open){ closeDrawer(); } else { openDrawer(); }
    }
    function openDrawer(){
      drawer.style.display='block'; scrim.style.display='block';
      document.body.classList.add('noscr');
      burger.setAttribute('aria-expanded','true');
    }
    function closeDrawer(){
      drawer.style.display='none'; scrim.style.display='none';
      document.body.classList.remove('noscr');
      burger.setAttribute('aria-expanded','false');
    }

    /* ======= Smooth scroll with header offset ======= */
    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click',e=>{
        const id = a.getAttribute('href');
        if(!id || id === '#') return;
        const el = document.querySelector(id);
        if(!el) return;
        e.preventDefault();
        const y = el.getBoundingClientRect().top + window.pageYOffset - 10; // small offset
        window.scrollTo({top:y - 60, behavior:'smooth'});
      })
    });

    /* ======= Scrollspy (active link highlight) ======= */
    const sections = ['home','about','highlights','gallery','share','testimonials','contact'].map(id=>document.getElementById(id));
    const navLinks = Array.from(document.querySelectorAll('.links a[href^="#"]'));
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        if(entry.isIntersecting){
          const id = entry.target.id;
          navLinks.forEach(a=>{
            a.classList.toggle('active', a.getAttribute('href') === '#'+id);
          });
        }
      });
    }, {rootMargin: '-40% 0px -55% 0px', threshold: 0});
    sections.forEach(s=>io.observe(s));

    /* ======= Reveal on scroll ======= */
    const reveals = document.querySelectorAll('.reveal');
    const io2 = new IntersectionObserver((ents)=>{
      ents.forEach(ent=>{ if(ent.isIntersecting){ ent.target.classList.add('show'); io2.unobserve(ent.target);} })
    }, {threshold:.12});
    reveals.forEach(el=>io2.observe(el));

    /* ======= Lightbox ======= */
    const lb = document.getElementById('lightbox');
    function openLightbox(e){
      e.preventDefault();
      const link = e.currentTarget;
      const big = link.getAttribute('data-big');
      lb.querySelector('img').src = big;
      lb.classList.add('active');
      document.body.classList.add('noscr');
    }
    function closeLightbox(){
      lb.classList.remove('active');
      document.body.classList.remove('noscr');
      lb.querySelector('img').src = '';
    }
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLightbox(); });

    /* ======= Sign-in modal ======= */
    const modal = document.getElementById('signinModal');
    function openSign(){ if(typeof modal.showModal === 'function') modal.showModal(); else modal.setAttribute('open',''); }
    function closeSign(){ if(typeof modal.close === 'function') modal.close(); else modal.removeAttribute('open'); }
    function applyModalSign(){
      const v = document.getElementById('emailModal').value.trim();
      if(!v){ alert('Enter a valid email'); return; }
      document.getElementById('email').value = v;
      document.getElementById('signin-status').textContent = 'Signed in as ' + v;
      document.getElementById('uploadArea').style.display='block';
      closeSign();
    }
    function fakeSignIn(){
      const v = document.getElementById('email').value.trim();
      if(!v){ openSign(); return; }
      document.getElementById('signin-status').textContent = 'Signed in as ' + v;
      document.getElementById('uploadArea').style.display='block';
    }

    /* ======= Client-side watermarking (Canvas) ======= */
    const fileInput = document.getElementById('fileInput');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    function applyWatermark(){
      const file = fileInput.files?.[0];
      if(!file){ alert('Choose an image file first'); return; }
      const reader = new FileReader();
      reader.onload = (ev)=>{
        const img = new Image();
        img.onload = ()=>{
          // Scale to a reasonable size for web (max width 1600)
          const maxW = 1600;
          const scale = Math.min(1, maxW / img.width);
          canvas.width = Math.round(img.width * scale);
          canvas.height = Math.round(img.height * scale);
          ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

          // Watermark text
          const email = document.getElementById('email').value.trim();
          const wmInput = document.getElementById('wmText').value.trim();
          const wm = wmInput || email || 'Central College Mityana • Prom 2024';

          // Draw watermark (bottom-right)
          const pad = Math.max(12, Math.round(canvas.width*0.012));
          const fontSize = Math.max(16, Math.round(canvas.width * 0.025));
          ctx.font = `700 ${fontSize}px Poppins, Arial`;
          ctx.textBaseline = 'bottom';

          // Shadow box for contrast
          const textW = ctx.measureText(wm).width;
          const textH = fontSize + 6;
          ctx.fillStyle = 'rgba(0,0,0,.35)';
          ctx.fillRect(canvas.width - textW - pad*1.5, canvas.height - textH - pad, textW + pad, textH + pad/2);

          // Text
          ctx.fillStyle = 'rgba(255,255,255,.92)';
          ctx.fillText(wm, canvas.width - textW - pad, canvas.height - pad);

          document.getElementById('previewWrap').style.display='block';
          // Scroll to preview
          document.getElementById('previewWrap').scrollIntoView({behavior:'smooth', block:'center'});
        };
        img.src = ev.target.result;
      };
      reader.readAsDataURL(file);
    }

    function downloadCanvas(){
      const a = document.createElement('a');
      a.download = 'prom-2024-watermarked.jpg';
      a.href = canvas.toDataURL('image/jpeg', 0.9);
      a.click();
    }
  </script>
</body>
</html>



