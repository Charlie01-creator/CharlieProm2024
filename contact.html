<!DOCTYPE html>
<html>
<head>
    <title>Gallery Debug Mode</title>
    <style>
        /* Previous styles remain the same */
        .error { color: red; }
    </style>
</head>
<body>
    <div class="gallery" id="gallery-container"></div>
    <div id="loading" class="loading">Loading images...</div>
    <div id="error-log" class="error"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Debug configuration
            const TOTAL_IMAGES = 20; // Reduced for testing
            const USE_REMOTE_TEST_IMAGES = true; // Uses picsum.photos for testing
            const LQIP_ENABLED = false; // Disabled for testing
            
            // Image URL generator
            const getImageUrl = (id) => {
                if (USE_REMOTE_TEST_IMAGES) {
                    return `https://picsum.photos/id/${id}/300/300`;
                } else {
                    return `${id}.jpg`; // Your local images
                }
            };

            // Error logging
            const logError = (msg) => {
                document.getElementById('error-log').innerHTML += `<p>${msg}</p>`;
                console.error(msg);
            };

            // Modified image loader
            const loadImage = (id, container) => {
                const url = getImageUrl(id);
                const img = new Image();
                img.crossOrigin = "anonymous";
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = 300;
                    canvas.height = 300;
                    ctx.drawImage(img, 0, 0, 300, 300);
                    container.appendChild(canvas);
                };
                
                img.onerror = () => logError(`Failed to load image ${id} from ${url}`);
                img.src = url;
            };

            // Load first batch
            for (let i = 1; i <= 5; i++) {
                const container = document.createElement('div');
                container.className = 'image-container';
                document.getElementById('gallery-container').appendChild(container);
                loadImage(i, container);
            }
        });
    </script>
</body>
</html>
